package org.exoplatform.selenium.platform.wiki.functional.activities;

import static org.exoplatform.selenium.TestLogger.info;

import org.exoplatform.selenium.Dialog;
import org.exoplatform.selenium.Utils;
import org.exoplatform.selenium.platform.HomePageActivity;
import org.exoplatform.selenium.platform.ManageAccount;
import org.exoplatform.selenium.platform.NavigationToolbar;
import org.exoplatform.selenium.platform.social.ManageMember;
import org.exoplatform.selenium.platform.wiki.Permalink;
import org.openqa.selenium.By;
import org.testng.annotations.AfterMethod;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.Test;

public class Wiki_Activity_Dislike extends Permalink{
	
	ManageAccount acc;
	HomePageActivity home;
	NavigationToolbar nav;
	Permalink per; 
	Dialog dialog; 
	ManageMember mMember; 

	@BeforeMethod
	public void beforeMethod(){
		initSeleniumTest();
		driver.get(plfURL);
		driver.manage().window().maximize();
		per = new Permalink();
		mMember = new ManageMember(driver, this.plfVersion);
		home = new HomePageActivity(driver,this.plfVersion);
		nav = new NavigationToolbar(driver,this.plfVersion);
		acc = new ManageAccount(driver,this.plfVersion);
		acc.signIn(DATA_USER1, DATA_PASS);
	}

	@AfterMethod
	public void afterMethod(){
		driver.manage().deleteAllCookies();
		driver.quit();
	}
	/**
	 * Case ID:118081.
	 * Test Case Name: Dislike a Wiki activity from like icon.
	 * Done with OSs and browsers : 
	 * Generated by chinhdtt at 2014/03/06 10:33:45
	 */
	@Test
	public  void test01_DislikeAWikiActivityFromLikeIcon() {
		info("Test 10 Dislike a Wiki activity from like icon");
		String random =getRandomNumber();
		String title = "Title case"+random;
		String content = "Content case"+random;
		/*
		- Connect to Intranet 
		- Add a Wiki activity
		 *Input Data: 
		 *Expected Outcome: A wiki page is created		*/
		goToWiki();
		addBlankWikiPage(title, content, 0);

		/*
		- Back to Homepage
		- Click like icon
		 *Input Data: 
		 *Expected Outcome: 
		- The Wiki activity is displayed in the activity stream*like icon + number of likes to 1		*/
		nav.goToHomePage();
		home.checkActivityInfoOfWiki(title, content,"1");
		home.likeOrUnlikeActivity(title);

		/*
		- Click on like icon again
		 *Input Data: 
		 *Expected Outcome: 
		- The Wiki activity is disliked by the user, the number of like is updated to -1		*/ 
		home.likeOrUnlikeActivity(title);

		//Delete data test
		click(By.linkText(title));
		Utils.pause(2000);
		deleteCurrentWikiPage();
	}
}
